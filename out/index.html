<!DOCTYPE html><html><head><title>Bortapp</title><meta content='width=device-width, initial-scale=1.0' name='viewport'><meta content='width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;' name='viewport'><style type='text/css'>body{font-family:andale mono, courier new, courier}th{text-align:right}td{text-align:center;width:32px}td .destination{font-size:10px}th.loading{background-color:#444;color:#fff}.green{background-color:#aaeeaa}.blue{background-color:#aaaaee}.yellow{background-color:#eeeeaa}.red{background-color:#ee88aa}.orange{background-color:#eeaa88}table#to_sfo td.highlighted{background-color:#ff0}table#to_dub td.highlighted{background-color:#f80}td.future,td.empty{opacity:0.2}tr.hidden{display:none}.btn{color:#fff;border-radius:2px;padding:2px;font-size:0.75em;line-height:1em;margin:2px;cursor:pointer}</style><link href='mario.ico' id='favicon' rel='shortcut icon' type='image/x-icon'></head><body><div id='sf'><h3>&raquo;SF</h3><table border='1' cellspacing='0'><tbody id='sf-stations-south'><tr><th>16th</th><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><th>civc</th><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><th>powl</th><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><th>mont</th><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><h3> &raquo;EB </h3><table border='1' cellspacing='0'><tbody id='sf-stations-north'><tr><th>16th</th><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><th>civc</th><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><th>powl</th><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><th>mont</th><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table></div><div id='dp'><h3>&raquo;SF</h3><table border='1' cellspacing='0'><tbody id='eb-stations-south'><tr><th>conc</th><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><th>phil</th><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table></div><div class='refresh'><a href='#' id='refresh'>Refresh();</a></div><div data-stations-eb='["conc", "phil"]' data-stations-sf='["16th", "civc", "powl", "mont"]' id='data'></div><script async='async' src='https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js'></script><script async='async'>(function(){var f,j,i,g,h,d,l,e,k,a,b,c;h=function(){var o,q,p,n;n={};q=location.search.slice(1);p=/([^&=]+)=([^&]*)/g;while((o=p.exec(q))){n[decodeURIComponent(o[1])]=decodeURIComponent(o[2])}return n};i="yellow";window.onload=function(){$("#sf h3 a.btn."+i).hide();$("#refresh").click(function(m){d();return m.preventDefault()});return d()};d=function(){l("sf");return l("eb")};l=function(s){var p,o,r,n,q,m;q=$("#data").data("stations-"+s);m=[];for(o=r=0,n=q.length;r<n;o=++r){p=q[o];m.push(j(p,o,s))}return m};j=function(p,o,r){var q,s,m,n;n=c(p);m={south:$("tbody#"+r+"-stations-south tr:nth-child("+(1+o)+")"),north:$("tbody#"+r+"-stations-north tr:nth-child("+(1+o)+")")};if(r==="eb"){delete m.north}for(q in m){s=m[q];s.children("th").addClass("loading")}for(q in m){s=m[q];console.log(s,o)}return $.get(n,function(u){var t;t=$(u).children("root").children("station");return b(t,m)})};c=function(n){var m;return m="http://api.bart.gov/api/etd.aspx?cmd=etd&orig="+n+"&key=MW9S-E7SL-26DU-VV8V"};b=function(n,m){var o;o=k(n);a(o.south,m.south);if(m.north){return a(o.north,m.north)}};k=function(n){var r,q,p,m,o;q={south:[],north:[]};o=n.children("etd").children("estimate");for(p=0,m=o.length;p<m;p++){r=o[p];g(r);if(r.show){q[r.direction].push(r)}}return q};g=function(n){var m;m=$(n);n.direction=m.children("direction").text().toLowerCase();n.color=m.children("color").text().toLowerCase();n.minutes=Number(m.children("minutes").text())||0;n.show=n.direction==="south"||n.color===i;return n.show=n.direction==="south"||n.color===i};a=function(r,q){var s,p,n,o,m;q.children("td").detach();q.children("th").removeClass("loading");o=r.sort(e).slice(0,10);m=[];for(p=0,n=o.length;p<n;p++){s=o[p];m.push(f(q,s))}return m};e=function(n,m){return n.minutes-m.minutes};f=function(m,n){return $("<td class='"+n.color+"'>"+n.minutes+"</td>").appendTo(m)}}).call(this);</script></body></html>