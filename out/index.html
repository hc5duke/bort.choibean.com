<!DOCTYPE html><html><head><title>Bortapp</title><meta content='width=device-width, initial-scale=1.0' name='viewport'><meta content='width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;' name='viewport'><style type='text/css'>body{font-family:andale mono, courier new, courier}th{text-align:right}td{text-align:center;width:32px}td .destination{font-size:10px}.green{background-color:#aaeeaa}.blue{background-color:#aaaaee}.yellow{background-color:#eeeeaa}.red{background-color:#ee88aa}.orange{background-color:#eeaa88}table#to_sfo td.highlighted{background-color:#ff0}table#to_dub td.highlighted{background-color:#f80}td.future,td.empty{opacity:0.2}tr.hidden{display:none}.btn{color:#fff;border-radius:2px;padding:2px;font-size:0.75em;line-height:1em;margin:2px;cursor:pointer}</style><link href='mario.ico' id='favicon' rel='shortcut icon' type='image/x-icon'></head><body><div id='sf'><h3>&raquo;SF</h3><table border='1' cellspacing='0'><tbody id='sf-stations-south'><tr><th>16th</th><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><th>civc</th><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><th>powl</th><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><th>mont</th><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><h3> &raquo;EB <a class='btn blue' onclick="location.search='?line=blue';">blue</a><a class='btn yellow' onclick="location.search='?line=yellow';">yellow</a></h3><table border='1' cellspacing='0'><tbody id='sf-stations-north'><tr><th>16th</th><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><th>civc</th><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><th>powl</th><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><th>mont</th><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table></div><div id='dp'><h3>&raquo;SF</h3><table border='1' cellspacing='0'><tbody id='eb-stations-south'><tr><th>dubl</th><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><th>wdub</th><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><th>conc</th><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><th>phil</th><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table></div><div data-stations-eb='["dubl", "wdub", "conc", "phil"]' data-stations-sf='["16th", "civc", "powl", "mont"]' id='data'></div><script async='async' src='https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js'></script><script async='async'>(function(){var f,c,j,i,g,h,e,k,a,b,d;h=function(){var n,p,o,l;l={};p=location.search.slice(1);o=/([^&=]+)=([^&]*)/g;while((n=o.exec(p))){l[decodeURIComponent(n[1])]=decodeURIComponent(n[2])}return l};c=new Date()<1371668400000?"blue":"yellow";i=h()["line"]||c;window.onload=function(){var t,s,p,q,o,n,r,l,m;$("#sf h3 a.btn."+i).hide();q=$("#data").data("stations-sf");for(p=o=0,r=q.length;o<r;p=++o){t=q[p];j(t,p,"sf")}s=$("#data").data("stations-eb");m=[];for(p=n=0,l=s.length;n<l;p=++n){t=s[p];m.push(j(t,p,"eb"))}return m};j=function(o,n,p){var l,m;m=d(o);l={south:$("tbody#"+p+"-stations-south tr:nth-child("+(1+n)+")"),north:$("tbody#"+p+"-stations-north tr:nth-child("+(1+n)+")")};if(p==="eb"){delete l.north}return $.get(m,function(r){var q;q=$(r).children("root").children("station");return b(q,l)})};d=function(m){var l;return l="http://api.bart.gov/api/etd.aspx?cmd=etd&orig="+m+"&key=MW9S-E7SL-26DU-VV8V"};b=function(m,l){var n;n=k(m);a(n.south,l.south);if(l.north){return a(n.north,l.north)}};k=function(m){var q,p,o,l,n;p={south:[],north:[]};n=m.children("etd").children("estimate");for(o=0,l=n.length;o<l;o++){q=n[o];g(q);if(q.show){p[q.direction].push(q)}}return p};g=function(m){var l;l=$(m);m.direction=l.children("direction").text().toLowerCase();m.color=l.children("color").text().toLowerCase();m.minutes=Number(l.children("minutes").text())||0;m.show=m.direction==="south"||m.color===i;return m.show=m.direction==="south"||m.color===i};a=function(q,p){var r,o,m,n,l;p.children("td").detach();n=q.sort(e).slice(0,10);l=[];for(o=0,m=n.length;o<m;o++){r=n[o];l.push(f(p,r))}return l};e=function(m,l){return m.minutes-l.minutes};f=function(l,m){return $("<td class='"+m.color+"'>"+m.minutes+"</td>").appendTo(l)}}).call(this);</script></body></html>