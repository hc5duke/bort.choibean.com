<!DOCTYPE html><html><head><title>Bortapp</title><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="width=device-width; initial-scale=1; maximum-scale=1; user-scalable=0;" name="viewport"><style type="text/css">body{font-family:andale mono,courier new,courier}th{text-align:right}td{text-align:center;width:32px}td .dest{font-size:10px}th.loading{background-color:#444;color:#fff}th.error{background-color:#f88;color:#000}.green{background-color:#aea}.blue{background-color:#aae}.yellow{background-color:#eea}.red{background-color:#e8a}.orange{background-color:#ea8}table#to_sfo td.highlighted{background-color:#ff0}table#to_dub td.highlighted{background-color:#f80}td.empty,td.future{opacity:.2}tr.hidden{display:none}.btn{color:#fff;border-radius:2px;padding:2px;font-size:.75em;line-height:1em;margin:2px;cursor:pointer}</style><link href="mario.ico" id="favicon" rel="shortcut icon" type="image/x-icon"></head><body><div id="sf"><h3>&raquo;SF</h3><table border="1" cellspacing="0"><tbody id="sf-stations-south"><tr><th>16th</th><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><th>civc</th><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><th>powl</th><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><h3>&raquo;EB</h3><table border="1" cellspacing="0"><tbody id="sf-stations-north"><tr><th>16th</th><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><th>civc</th><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><th>powl</th><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table></div><div id="dp"><h3>&raquo;SF</h3><table border="1" cellspacing="0"><tbody id="eb-stations-south"><tr><th>conc</th><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><th>phil</th><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table></div><div class="refresh"><a href="#" id="refresh">Refresh();</a></div><div data-stationseb="[&quot;conc&quot;, &quot;phil&quot;]" data-stationssf="[&quot;16th&quot;, &quot;civc&quot;, &quot;powl&quot;]" id="data"></div><script async="async">(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};a=["phil","conc"],g=function(){var a,b,c,d;for(d={},b=location.search.slice(1),c=/([^&=]+)=([^&]*)/g;a=c.exec(b);)d[decodeURIComponent(a[1])]=decodeURIComponent(a[2]);return d},e="yellow",window.onload=function(){return h(),document.getElementById("refresh").onclick=function(a){return h(),a.preventDefault()}},h=function(){return i("sf"),i("eb")},i=function(a){var b,c,e,f,g,h;for(c=JSON.parse(document.getElementById("data").dataset["stations"+a]),h=[],e=f=0,g=c.length;g>f;e=++f)b=c[e],h.push(d(b,e,a));return h},d=function(a,b,c){var d,e,f,g,h,i,j,k,l;h=p(a),g={south:document.getElementById(""+c+"-stations-south").getElementsByTagName("tr")[b]},"eb"!==c&&(g.north=document.getElementById(""+c+"-stations-north").getElementsByTagName("tr")[b]);for(d in g)for(f=g[d],l=f.getElementsByTagName("th"),j=0,k=l.length;k>j;j++)e=l[j],e.className=e.className.replace(/\ ?error\ ?/,"")+" loading";return i=new XMLHttpRequest,i.onreadystatechange=function(){var a,b,c;if(4===i.readyState){if(200===i.status)return a=i.responseXML,b=a.getElementsByTagName("station")[0],n(b,g);c=[];for(d in g)f=g[d],c.push(function(){var a,b,c,d;for(c=f.getElementsByTagName("th"),d=[],a=0,b=c.length;b>a;a++)e=c[a],d.push(e.className=e.className.replace(/\ ?loading\ ?/,"")+" error");return d}());return c}},i.open("GET",h,!0),i.send()},p=function(a){var b;return b="http://api.bart.gov/api/etd.aspx?cmd=etd&orig="+a+"&key=MW9S-E7SL-26DU-VV8V"},n=function(a,b){var c;return c=k(a),m(c.south,b.south),b.north?m(c.north,b.north):void 0},k=function(a){var b,c,d,e,g;for(c={south:[],north:[]},d=a.getElementsByTagName("estimate"),e=0,g=d.length;g>e;e++)b=d[e],f(b),b.show&&c[b.direction].push(b);return c},c=function(a,b){return a.getElementsByTagName(b)[0].textContent.toLowerCase()},f=function(a){var b;return a.direction=c(a,"direction"),a.color=c(a,"color"),a.minutes=Number(c(a,"minutes"))||0,a.show="south"===a.direction||a.color===e,b=a.parentElement.getElementsByTagName("abbreviation")[0],a.dest=b.innerHTML||b.textContent},m=function(a,c){var d,e,f,g,h,i,k,l,m,n,o,p,q;for(f=[],o=c.childNodes,h=0,l=o.length;l>h;h++)d=o[h],"TD"===d.tagName?f.push(d):"TH"===d.tagName&&(d.className=d.className.replace(/\ ?error\ ?/,"").replace(/\ ?loading\ ?/,""));for(i=0,m=f.length;m>i;i++)g=f[i],c.removeChild(g);for(p=a.sort(j).slice(0,10),q=[],k=0,n=p.length;n>k;k++)e=p[k],q.push(b(c,e));return q},j=function(a,b){return a.minutes-b.minutes},b=function(a,b){var c;return c=document.createElement("td"),c.className=b.color,l(a.firstChild.innerText,b.dest)?c.innerHTML=b.minutes+"<span class='dest'>"+(b.dest||"?")[0]+"</span>":c.innerText=b.minutes,a.appendChild(c)},o={fromSf:{PITT:!0,SFIA:!0,MLBR:!0,DALY:!0,"24TH":!0},fromEb:{SFIA:!0}},l=function(b,c){var d;return d=q.call(a,b)>=0?"fromEb":"fromSf",!o[d][c]}}).call(this);</script></body></html>