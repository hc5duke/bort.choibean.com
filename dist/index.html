<!DOCTYPE html><html><head><title>Bortapp</title><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="width=device-width; initial-scale=1; maximum-scale=1; user-scalable=0;" name="viewport"><style type="text/css">body{font-family:andale mono,courier new,courier}th{text-align:right}td{white-space:nowrap;text-align:center;width:32px}td .dest,td .dest-all{font-size:10px}td .dest-all{display:none}th.loading{background-color:#444;color:#fff}th.error{background-color:#f88;color:#000}.left{float:left}.right{float:right}.clear{clear:both}.green{background-color:#aea}.blue{background-color:#aae}.yellow-plus{background-color:#ff4}.yellow{background-color:#eea}.white{background-color:#ccc}.red{background-color:#e8a}.orange{background-color:#ea8}</style><link href="mario.ico" id="favicon" rel="shortcut icon" type="image/x-icon"><link href="/touch-icon-iphone.png" rel="apple-touch-icon"><link href="/touch-icon-ipad.png" rel="apple-touch-icon" sizes="76x76"><link href="/touch-icon-iphone-retina.png" rel="apple-touch-icon" sizes="120x120"><link href="/touch-icon-ipad-retina.png" rel="apple-touch-icon" sizes="152x152"></head><body><div id="sf"><h3>&raquo;SF</h3><table border="1" cellspacing="0"><tbody id="sf-stations-south"><tr><th>16th</th><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><th>civc</th><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><th>powl</th><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><h3>&raquo;EB</h3><table border="1" cellspacing="0"><tbody id="sf-stations-north"><tr><th>16th</th><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><th>civc</th><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><th>powl</th><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table></div><div id="dp"><h3>&raquo;SF</h3><table border="1" cellspacing="0"><tbody id="eb-stations-south"><tr><th>conc</th><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><th>phil</th><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table></div><div class="refresh left"><a href="#" id="refresh">Refresh();</a></div><div class="refresh right"><a href="#" id="toggle">Toggle();</a></div><div class="clear" data-stationseb="[&quot;conc&quot;, &quot;phil&quot;]" data-stationssf="[&quot;16th&quot;, &quot;civc&quot;, &quot;powl&quot;]" id="data"></div><script async="async">(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};a=["phil","conc"],i=function(){var a,b,c,d;for(d={},b=location.search.slice(1),c=/([^&=]+)=([^&]*)/g;a=c.exec(b);)d[decodeURIComponent(a[1])]=decodeURIComponent(a[2]);return d},f="yellow",g="yellow-plus",window.onload=function(){return j(),document.getElementById("refresh").onclick=function(a){return j(),a.preventDefault()},document.getElementById("toggle").onclick=function(a){return o(),a.preventDefault()}},j=function(){return k("sf"),k("eb")},l=!1,o=function(){var a,b,c,d,e,f,g,h,i,j,k,m,n,o,p;if(l){for(l=!1,j=document.getElementsByClassName("dest"),b=0,f=j.length;f>b;b++)a=j[b],a.style.display="inherit";for(k=document.getElementsByClassName("dest-all"),o=[],c=0,g=k.length;g>c;c++)a=k[c],o.push(a.style.display="none");return o}for(l=!0,m=document.getElementsByClassName("dest"),d=0,h=m.length;h>d;d++)a=m[d],a.style.display="none";for(n=document.getElementsByClassName("dest-all"),p=[],e=0,i=n.length;i>e;e++)a=n[e],p.push(a.style.display="inherit");return p},k=function(a){var b,c,e,f,g,h;for(c=JSON.parse(document.getElementById("data").dataset["stations"+a]),h=[],e=f=0,g=c.length;g>f;e=++f)b=c[e],h.push(d(b,e,a));return h},d=function(a,b,c){var d,e,f,g,h,i,j,k,l;h=t(a),g={south:document.getElementById(""+c+"-stations-south").getElementsByTagName("tr")[b]},"eb"!==c&&(g.north=document.getElementById(""+c+"-stations-north").getElementsByTagName("tr")[b]);for(d in g)for(f=g[d],l=f.getElementsByTagName("th"),j=0,k=l.length;k>j;j++)e=l[j],e.className=e.className.replace(/\ ?error\ ?/,"")+" loading";return i=new XMLHttpRequest,i.onreadystatechange=function(){var a,b,c;if(4===i.readyState){if(200===i.status)return a=i.responseXML,b=a.getElementsByTagName("station")[0],r(b,g);c=[];for(d in g)f=g[d],c.push(function(){var a,b,c,d;for(c=f.getElementsByTagName("th"),d=[],a=0,b=c.length;b>a;a++)e=c[a],d.push(e.className=e.className.replace(/\ ?loading\ ?/,"")+" error");return d}());return c}},i.open("GET",h,!0),i.send()},t=function(a){var b;return b="//api.bart.gov/api/etd.aspx?cmd=etd&orig="+a+"&key=MW9S-E7SL-26DU-VV8V"},r=function(a,b){var c;return c=n(a),q(c.south,b.south),b.north?q(c.north,b.north):void 0},n=function(a){var b,c,d,e,f,g;for(e=a.getElementsByTagName("abbr")[0].textContent,c={south:[],north:[]},d=a.getElementsByTagName("estimate"),f=0,g=d.length;g>f;f++)b=d[f],b.src=e,h(b),b.show&&c[b.direction].push(b);return c},c=function(a,b){return a.getElementsByTagName(b)[0].textContent.toLowerCase()},h=function(a){var b;return b=a.parentElement.getElementsByTagName("abbreviation")[0],a.dest=b.innerHTML||b.textContent,a.direction=c(a,"direction"),a.minutes=Number(c(a,"minutes"))||0,a.color=e(a),a.show="south"===a.direction||a.color===f||"PHIL"===a.dest},e=function(a){var b;return b=c(a,"color"),b||("PHIL"!==a.src||"DALY"!==a.dest)&&"24TH"!==a.dest||(b=g),b},q=function(a,c){var d,e,f,g,h,i,j,k,l,n,o,p,q;for(f=[],o=c.childNodes,h=0,k=o.length;k>h;h++)d=o[h],"TD"===d.tagName?f.push(d):"TH"===d.tagName&&(d.className=d.className.replace(/\ ?error\ ?/,"").replace(/\ ?loading\ ?/,""));for(i=0,l=f.length;l>i;i++)g=f[i],c.removeChild(g);for(p=a.sort(m).slice(0,10),q=[],j=0,n=p.length;n>j;j++)e=p[j],q.push(b(c,e));return q},m=function(a,b){return a.minutes-b.minutes},b=function(a,b){var c,d;return d=document.createElement("td"),d.className=b.color,c="<nobr>",c+=p(a.firstChild.innerText,b.dest)?b.minutes+"<span class='dest'>"+(b.dest||"?")[0]+"</span>":b.minutes,c+="<span class='dest-all'>"+b.dest+"</span></nobr>",d.innerHTML=c,a.appendChild(d)},s={fromSf:{PITT:!0,SFIA:!0,MLBR:!0,DALY:!0,"24TH":!0},fromEb:{SFIA:!0}},p=function(b,c){var d;return d=u.call(a,b)>=0?"fromEb":"fromSf",!s[d][c]}}).call(this);</script></body></html>